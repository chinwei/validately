webpackJsonp([1],[,,,,,,,function(t,e,i){i(60);var s=i(3)(i(45),i(116),"data-v-594489dc",null);t.exports=s.exports},,,,,,,,,,,,,,function(t,e,i){i(58);var s=i(3)(i(48),i(114),null,null);t.exports=s.exports},,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var s=i(22),n=i(121),r=i(108),o=i.n(r),a=i(107),c=i.n(a),l=i(111),u=i.n(l),d=i(109),p=i.n(d);s.a.use(n.a);var v=function(t,e,i){if(i)return i;var s={};return t.hash&&(s.selector=t.hash),t.matched.some(function(t){return t.meta.scrollToTop})&&(s.x=0,s.y=0),s};e.a=new n.a({mode:"history",scrollBehavior:v,routes:[{path:"/",name:"home",component:o.a},{path:"/projects/",name:"project-list",component:p.a},{path:"/projects/new",name:"new-project",component:c.a},{path:"/projects/:id/edit",name:"edit-project",component:c.a},{path:"/projects/:id/",name:"view-project",component:u.a}]})},function(t,e){},function(t,e,i){i(64);var s=i(3)(i(43),i(120),null,null);t.exports=s.exports},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(65),o=(i.n(r),i(106)),a=i.n(o),c={apiKey:"AIzaSyA_2Bu81WuWrjLoJHP3EFDo41jYgNJ8BUM",authDomain:"validately-948d9.firebaseapp.com",databaseURL:"https://validately-948d9.firebaseio.com",projectId:"validately-948d9",storageBucket:"validately-948d9.appspot.com",messagingSenderId:"354991934469"};n.a.initializeApp(c),e.default={name:"app",components:{AppBar:a.a},created:function(){var t=this;n.a.auth().onAuthStateChanged(function(e){if(e){t.user=e;var i=n.a.database().ref("/users/").child(t.user.uid).once("value",function(e){null!==e.val()?(console.log("window location:",window.location.pathname),"/"==window.location.pathname&&t.$router.replace("/projects")):i=n.a.database().ref("/users/"+t.user.uid).set({displayName:t.user.displayName,email:t.user.email})})}else console.log("not signed in"),t.user=""}),"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1)},data:function(){return{user:{}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(34),o=(i.n(r),i(7)),a=i.n(o);e.default={name:"app-bar",created:function(){},methods:{goBack:function(){console.log("user",this.user.uid),this.user.uid?this.$router.replace("/projects"):this.$router.replace("/")},goToProject:function(t){this.$router.push({path:t})},loginUser:function(){console.log(this);var t=this;t.isLoading=!0;var e=new n.a.auth.FacebookAuthProvider;n.a.auth().signInWithPopup(e).then(function(e){console.log(this);e.credential.accessToken,e.user;t.isLoggedIn=!0,t.isLoading=!1}).catch(function(t){t.code,t.message,t.email,t.credential})},logOut:function(){var t=this;this.isLoggedIn=!1,n.a.auth().signOut().then(function(){t.$router.replace("/"),this.$emit("loggedOut")}).catch(function(t){})}},components:{ButtonBasic:a.a},props:{user:{}},data:function(){return{isLoggedIn:!1,isLoading:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"button-basic",props:{label:"",disabled:!1,modifiers:""},methods:{clickHandler:function(){this.$emit("action")}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(97),o=i.n(r),a=i(95),c=i.n(a),l=i(35),u=i.n(l),d=i(7),p=i.n(d),v=i(128);i.n(v);e.default={name:"edit-project",mounted:function(){var t=this;this.handleUpdatedEditor();var e=this;e.quill=new c.a("#editor",{modules:{toolbar:{container:"#toolbar"}},placeholder:"Describe your project in more detail!",theme:"snow"}),e.quill.on("selection-change",function(t,i,s){if(t)if(0==t.length)console.log("User cursor is on",t.index),e.isFocused=!0;else{var n=e.quill.getText(t.index,t.length);console.log("User has highlighted",n),e.isFocused=!0}else console.log("Cursor not in the editor"),e.isFocused=!1}),this.quill.on("text-change",function(){t.project.value=u()("#editor .ql-editor").html()});var i=n.a.database().ref("projects/"+this.$route.params.id),s=n.a.database().ref("writeup/"+this.$route.params.id);void 0!==this.$route.params.id?(i.once("value",function(t){e.project=t.val()}),s.once("value",function(t){e.writeup=t.val(),e.quill.setContents(e.writeup.contentDelta)})):console.log("nope, this is a new project")},props:{user:{}},validations:{validationGroup:["project.title","project.desc","project.value"],project:{title:{required:v.required},desc:{required:v.required,maxLength:i.i(v.maxLength)(160)},value:{required:v.required}}},components:{ButtonBasic:p.a},methods:{cancel:function(){},handleSubmit:function(t){var e=this,i=new Date,s={content:u()("#editor .ql-editor").html(),contentDelta:e.quill.getContents()},r={title:e.project.title,desc:e.project.desc,time:Date.parse(i).toString(),owner:{uid:e.user.uid,displayName:e.user.displayName}};void 0!==this.$route.params.id?r.url=e.$route.params.id:r.url=o.a.generate();var a=n.a.database().ref("/projects/"+r.url),c=n.a.database().ref("/writeup/"+r.url);a.set(r),c.set(s),e.$router.push("/projects/"+r.url)},handleUpdatedEditor:function(){console.log(this.quill)}},data:function(){return{project:{title:"",desc:"",value:""},writeup:{},isFocused:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(7),n=i.n(s),r=i(21),o=i.n(r);e.default={name:"home",components:{ButtonBasic:n.a,LoginOverlay:o.a},props:{user:{}},methods:{goToProject:function(t){this.$router.push({path:t})},goToNewProject:function(){this.user.uid?this.goToProject("/projects/new"):this.isVisible=!0},clickHandler:function(){this.$router.push({path:path})},hideOverlay:function(){this.isVisible=!1}},data:function(){return{isVisible:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(34),o=(i.n(r),i(7)),a=i.n(o);e.default={name:"login-overlay",methods:{loginUser:function(){console.log(this);var t=this;t.isLoading=!0;var e=new n.a.auth.FacebookAuthProvider;n.a.auth().signInWithPopup(e).then(function(e){console.log(this);e.credential.accessToken,e.user;t.isLoggedIn=!0,t.isLoading=!1,t.hideOverlay()}).catch(function(t){t.code,t.message,t.email,t.credential})},hideOverlay:function(){this.$emit("hideOverlay")}},components:{ButtonBasic:a.a},props:{user:{},isVisible:!1},data:function(){return{isLoggedIn:!1,isLoading:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(37),o=i.n(r),a=i(110),c=i.n(a),l=i(7),u=i.n(l),d=i(21),p=i.n(d);e.default={name:"project-list",created:function(){var t=this;this.getCreatedProjects(),this.getLikedProjects(),n.a.database().ref("projects/").orderByChild("time").limitToLast(5).on("child_added",function(e){t.projects.push(e.val()),t.projectObj[e.key]=e.val()})},mounted:function(){var t=this;n.a.database().ref("projects/").orderByChild("time").limitToLast(5).on("value",function(e){t.projectObj=e.val()})},components:{ProjectListItem:c.a,ButtonBasic:u.a,LoginOverlay:p.a},props:{user:{}},methods:{goToProject:function(t){this.$router.push({path:t})},goToNewProject:function(){this.user.uid?this.goToProject("/projects/new"):this.isVisible=!0},clickHandler:function(){this.$router.push({path:path})},getCreatedProjects:function(){var t=this;t.user.uid&&n.a.database().ref("projects/").orderByChild("owner/uid").equalTo(t.user.uid).limitToLast(5).on("value",function(e){t.currentUserProjectObj=e.val()})},getLikedProjects:function(){var t=this;this.user.uid&&n.a.database().ref("users/"+this.user.uid).on("value",function(e){t.currentUserTargetObj=e.val()})},hideOverlay:function(){this.isVisible=!1}},computed:{listArray:function(){var t=o.a.map(this.projects,function(t,e){return t}),e=o.a.sortBy(t,function(t,i){return e});return e.reverse()}},watch:{user:function(t){console.log("user..",t),this.getCreatedProjects(),this.getLikedProjects()}},data:function(){return{projects:[],projectObj:{},currentUserProjectObj:{},currentUserTargetObj:{},isVisible:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(37),n=i.n(s);e.default={name:"project-list-item",methods:{clickHandler:function(){this.$emit("action")}},props:{item:{},owner:{}},computed:{likedCount:function(){if(this.item){return n.a.keys(this.item.liked).length}}},data:function(){return{survey:{}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=i.n(s),r=i(35),o=(i.n(r),i(7)),a=i.n(o),c=i(21),l=i.n(c);e.default={name:"view-project",created:function(){var t=this;this.projectDB=n.a.database().ref("projects/"+this.$route.params.id),this.writeupDB=n.a.database().ref("writeup/"+this.$route.params.id),this.projectDB.once("value",function(e){t.project=e.val(),n.a.database().ref("users/"+t.user.uid+"/likes/"+e.key).on("value",function(e){t.likes=!!e.val()})}),this.writeupDB.once("value",function(e){t.writeup=e.val()})},mounted:function(){var t=this;window.fbAsyncInit=function(){FB.init({appId:"526030481081547",xfbml:!0,version:"v2.1"})},function(t,e,i){var s,n=t.getElementsByTagName(e)[0];t.getElementById(i)||(s=t.createElement(e),s.id=i,s.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9&appId=526030481081547",n.parentNode.insertBefore(s,n))}(document,"script","facebook-jssdk"),FB&&FB.XFBML.parse(),n.a.database().ref("projects/"+this.projectDB.key+"/liked/").on("value",function(e){t.likedCount=e.numChildren()})},props:{user:{}},watch:{user:function(t){var e=this;console.log("user changed!",t),this.projectDB.once("value",function(t){e.project=t.val(),n.a.database().ref("users/"+e.user.uid+"/likes/"+t.key).on("value",function(t){e.likes=!!t.val()})})}},components:{ButtonBasic:a.a,LoginOverlay:l.a},methods:{hideOverlay:function(){this.isVisible=!1},goBack:function(){this.$router.replace("/projects/")},editProject:function(){this.$router.push(this.$route.path+"/edit")},shareToFB:function(){FB.ui({method:"share",display:"popup",href:window.location.href},function(t){})},toggleLike:function(){var t=this,e=n.a.database().ref("users/"+this.user.uid+"/likes/"+this.projectDB.key),i=n.a.database().ref("projects/"+this.projectDB.key+"/liked/");e.transaction(function(e){return e=!e,e||(e=null),t.likes=e,e}),console.log("user id:",this.user.uid),i.child(this.user.uid).transaction(function(t){return t=!t,t||(t=null),t})},onLikeTrigger:function(){this.user.uid?this.toggleLike():this.isVisible=!0}},data:function(){return{project:{},writeup:{},owner:{},likes:!1,likedCount:"",isVisible:!1}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(22),n=i(41),r=i.n(n),o=i(39),a=i(42),c=i.n(a),l=i(40);i.n(l);s.a.use(c.a),s.a.config.productionTip=!1,window.App=new s.a({el:"#app",router:o.a,template:"<App/>",components:{App:r.a}})},,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){i(59);var s=i(3)(i(44),i(115),null,null);t.exports=s.exports},function(t,e,i){i(63);var s=i(3)(i(46),i(119),null,null);t.exports=s.exports},function(t,e,i){i(57);var s=i(3)(i(47),i(113),null,null);t.exports=s.exports},function(t,e,i){i(61);var s=i(3)(i(49),i(117),null,null);t.exports=s.exports},function(t,e,i){i(56);var s=i(3)(i(50),i(112),"data-v-07c26c6c",null);t.exports=s.exports},function(t,e,i){i(62);var s=i(3)(i(51),i(118),null,null);t.exports=s.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item?i("div",{staticClass:"list-item",on:{click:t.clickHandler}},[i("h1",[t._v(t._s(t.item.title))]),t._v(" "),i("span",{staticClass:"byline"},[t._v(t._s(t.item.desc))]),t._v(" "),i("div",[i("div",{staticClass:"info-row"},[i("span",{staticClass:"name",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.item.owner.displayName))]),t._v(" "),i("svg",{staticClass:"like-icon",staticStyle:{"margin-right":"3px"},attrs:{viewBox:"0 0 100 100",width:"16",height:"16"}},[i("use",{attrs:{"xlink:href":"./static/assets/sprites.svg#heart"}})]),t._v(" "),i("span",{staticClass:"liked-count"},[t._v(t._s(t.likedCount))])])])]):t._e()},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-container"},[i("login-overlay",{attrs:{isVisible:t.isVisible},on:{hideOverlay:t.hideOverlay}}),t._v(" "),i("div",{staticClass:"banner banner--main"},[i("div",{staticClass:"banner__content"},[i("div",{staticClass:"banner__title"},[t._v("Build better ideas with real stories")]),t._v(" "),i("p",{staticClass:"banner__writeup"},[t._v("Empower your ideas with meaningful feedback")]),t._v(" "),i("button-basic",{attrs:{label:"Start a Project",modifiers:"button--primary"},on:{action:t.goToNewProject}})],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overlay",class:{"is--visible":t.isVisible}},[i("div",{staticClass:"overlay__content"},[i("button-basic",{class:{"is--loading":t.isLoading},attrs:{label:"Close",modifiers:"button--text overlay__close-btn"},on:{action:t.hideOverlay}}),t._v(" "),i("h1",{staticClass:"banner__title"},[t._v("Start and grow ideas")]),t._v(" "),i("button-basic",{class:{"is--loading":t.isLoading},attrs:{label:"Login with Facebook",modifiers:"button--primary"},on:{action:t.loginUser}})],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-bar"},[i("div",{staticClass:"app-bar__content"},[i("span",{staticClass:"app-bar__project-row"},[i("svg",{staticClass:"logo-icon link u-spacing-mr-l",attrs:{width:"150",height:"50"},on:{click:t.goBack}},[i("use",{attrs:{"xlink:href":"/static/assets/sprites.svg#logo"}})]),t._v(" "),i("a",{staticClass:"u-spacing-mr-l",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.goToProject("/projects/new")}}},[t._v("Start a Project")])]),t._v(" "),i("span",[t.user.uid?t._e():i("button-basic",{class:{"is--loading":t.isLoading},attrs:{label:"Login with Facebook",modifiers:"button--primary"},on:{action:t.loginUser}}),t._v(" "),t.user.uid?i("span",{on:{click:t.logOut}},[t._v(t._s(t.user.displayName))]):t._e()],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"button",class:t.modifiers,attrs:{disabled:t.disabled},on:{click:t.clickHandler}},[t._v(t._s(t.label))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-container"},[i("login-overlay",{attrs:{isVisible:t.isVisible},on:{hideOverlay:t.hideOverlay}}),t._v(" "),i("div",{staticClass:"banner banner--secondary"},[i("div",{staticClass:"banner__content"},[i("div",{staticClass:"banner__title"},[t._v("Start something people love")]),t._v(" "),i("button-basic",{attrs:{label:"Start a Project",modifiers:"button--primary"},on:{action:t.goToNewProject}})],1)]),t._v(" "),i("div",{staticClass:"content"},[i("article",[void 0!=t.currentUserProjectObj?i("div",{staticClass:"list"},[t._m(0),t._v(" "),t._l(t.currentUserProjectObj,function(e,s){return i("project-list-item",{key:e,attrs:{item:e},on:{action:function(i){t.goToProject("/projects/"+e.url)}}})})],2):t._e(),t._v(" "),void 0!=t.currentUserTargetObj.likes?i("div",{staticClass:"list"},[t._m(1),t._v(" "),t._l(t.currentUserTargetObj.likes,function(e,s){return i("project-list-item",{key:e,attrs:{item:t.projectObj[s]},on:{action:function(e){t.goToProject("/projects/"+t.projectObj[s].url)}}})})],2):t._e(),t._v(" "),t.listArray.length>0?i("div",{staticClass:"list"},[t._m(2),t._v(" "),t._l(t.listArray,function(e,s){return i("project-list-item",{key:e,attrs:{item:e},on:{action:function(i){t.goToProject("projects/"+e.url)}}})})],2):t._e()])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list__header"},[i("h1",[t._v("Projects You Created")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list__header"},[i("h1",[t._v("Projects You Liked")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list__header"},[i("h1",[t._v("Recent Projects")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-container"},[i("login-overlay",{attrs:{isVisible:t.isVisible},on:{hideOverlay:t.hideOverlay}}),t._v(" "),i("div",{staticClass:"banner"},[i("div",{staticClass:"banner__content story-banner"},[i("div",{staticClass:"profile"},[i("span",{staticClass:"l-flex-row"},[t.user.uid?i("div",{staticClass:"profile-image img-container"},[i("img",{attrs:{src:t.user.photoURL,alt:""}})]):t._e(),t._v(" "),t.project.owner?i("div",{staticClass:"profile__name"},[t._v(t._s(t.project.owner.displayName))]):t._e()]),t._v(" "),i("span",[t.project.owner&&t.project.owner.uid===t.user.uid?i("button-basic",{attrs:{label:"Edit Project",modifiers:"button--text"},on:{action:t.editProject}}):t._e()],1)]),t._v(" "),i("h1",[t._v(t._s(t.project.title))]),t._v(" "),i("p",[t._v(t._s(t.project.desc))]),t._v(" "),i("div",[i("svg",{staticClass:"like-icon u-spacing-mr-m",class:{active:t.likes},attrs:{viewBox:"0 0 100 100",width:"24",height:"24"},on:{click:t.onLikeTrigger}},[i("use",{attrs:{"xlink:href":"/static/assets/sprites.svg#heart"}})]),t._v(" "),i("svg",{staticClass:"facebook-icon",attrs:{viewBox:"0 0 100 100",width:"24",height:"24"},on:{click:t.shareToFB}},[i("use",{attrs:{"xlink:href":"/static/assets/sprites.svg#facebook"}})])])])]),t._v(" "),i("div",{staticClass:"content"},[i("article",{staticClass:"story"},[t.writeup?i("div",{domProps:{innerHTML:t._s(t.writeup.content)}}):t._e(),t._v(" "),i("div",{staticClass:"fb-comments",attrs:{"data-numposts":"5"}})])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-container"},[i("div",{staticClass:"content"},[i("div",{staticClass:"profile"},[i("span",{staticClass:"l-flex-row"},[t.user.uid?i("div",{staticClass:"profile-image img-container"},[i("img",{attrs:{src:t.user.photoURL,alt:""}})]):t._e(),t._v(" "),i("div",{staticClass:"profile__name"},[t._v(t._s(t.user.displayName))])]),t._v(" "),i("span",[i("button-basic",{attrs:{disabled:t.$v.validationGroup.$error||t.$v.validationGroup.$invalid,label:"submit",modifiers:"button--primary"},on:{action:t.handleSubmit}})],1)]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.project.title,expression:"project.title"}],staticClass:"input-text input--title",class:{"is--error":t.$v.project.title.$error&&t.$v.project.title.$dirty},attrs:{placeholder:"Name Your Project...",type:"text"},domProps:{value:t.project.title},on:{input:[function(e){e.target.composing||(t.project.title=e.target.value)},function(e){t.$v.project.title.$touch()}]}}),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.project.desc,expression:"project.desc"}],staticClass:"input-text input__long-text",class:{"is--error":t.$v.project.desc.$error&&t.$v.project.desc.$dirty,"is--hidden":t.$v.project.title.$invalid&&!t.$v.project.title.$error},attrs:{placeholder:"Briefly describe your project here!",type:"text"},domProps:{value:t.project.desc},on:{input:[function(e){e.target.composing||(t.project.desc=e.target.value)},function(e){t.$v.project.desc.$touch()}]}}),t._v(" "),i("div",{staticClass:"ql-toolbar ql-snow",class:{"is--active":t.isFocused},attrs:{id:"toolbar"}},[i("button",{staticClass:"ql-bold"}),t._v(" "),i("button",{staticClass:"ql-italic"}),t._v(" "),i("button",{staticClass:"ql-image"})]),t._v(" "),i("div",{staticClass:"editor-container",class:{"is--hidden":t.$v.project.desc.$invalid&&!t.$v.project.desc.$error}},[i("div",{attrs:{id:"editor"},model:{value:t.project.value,callback:function(e){t.project.value=e},expression:"project.value"}})])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"fb-root"}}),t._v(" "),i("app-bar",{attrs:{user:t.user}}),t._v(" "),i("transition",{attrs:{name:"slide-fade"}},[i("router-view",{attrs:{user:t.user}})],1)],1)},staticRenderFns:[]}}],[52]);
//# sourceMappingURL=app.04ef36e4d7aa2f98c20b.js.map